{"version":3,"sources":["src/index.js"],"names":["hexToDec","hexString","parseInt","Math","minmax","a","b","c","Color","r","g","str","replace","length","substring","config","bubbleSize","bubbleSpeed","bubbleNumber","bubbleNumber_mobile","strokeDistance","globalSpeed","bubbleColor","initialBubbleColor","doConnect","Bubble","canvas","outOfBounds","_v","x","round","random","width","y","height","vx","vy","color","fromHex","alpha","size","matrix","min","ctx","move","beginPath","globalCompositeOperation","colors","fillStyle","join","arc","PI","fill","closePath","err","console","log","Fun","document","querySelectorAll","getContext","offsetHeight","offsetWidth","colorMatrix","bubbles","nbBubbles","requestAnimationFrame","main","cancelAnimationFrame","_animationFrame","e","preventDefault","previousTouch","event","touches","clientX","clientY","move_x","move_y","replaceBubbles","movementX","movementY","bubble","sqrt","pow","abs","changeColor","b1","b2","d","strokeStyle","moveTo","lineTo","stroke","clear","filter","push","testConnexion","draw","connexions","pop","connected","conn","connexion","connect","max","Err","clearRect","addEventListener","handleMouseMove","bind","handleTouchMove","handleResize","window","calculateHeight","setInterval","vh","innerHeight","documentElement","style","setProperty","init"],"mappings":"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","file":"src.232d33b8.js","sourceRoot":"..","sourcesContent":["import \"./styles.css\";\n\nMath.minmax = function (a, b, c) {\n  if (c < a) {\n    return a;\n  } else if (c > b) {\n    return b;\n  } else {\n    return c;\n  }\n};\n\nfunction hexToDec(hexString) {\n  return parseInt(hexString, 16);\n}\n\nclass Color {\n  constructor(r, g, b, a) {\n    this.r = r;\n    this.g = g;\n    this.b = b;\n    this.a = a;\n\n    return this;\n  }\n\n  static fromHex(str) {\n    str = str.replace(\"#\", \"\");\n    var r = 0;\n    var g = 0;\n    var b = 0;\n    var a = 1;\n    if (str.length === 3 || str.length === 4) {\n      r = hexToDec(str.substring(0, 1) + str.substring(0, 1));\n      g = hexToDec(str.substring(1, 2) + str.substring(1, 2));\n      b = hexToDec(str.substring(2, 3) + str.substring(2, 3));\n      if (str.length === 4) {\n        a = hexToDec(str.substring(3, 4) + str.substring(3, 4)) / 255;\n      }\n    } else if (str.length === 6 || str.length === 8) {\n      r = hexToDec(str.substring(0, 2));\n      g = hexToDec(str.substring(2, 4));\n      b = hexToDec(str.substring(4, 6));\n      if (str.length === 8) {\n        a = hexToDec(str.substring(6, 8)) / 255;\n      }\n    }\n\n    return new Color(r, g, b, a);\n  }\n\n  toString() {\n    return \"rgba(\" + this.r + \",\" + this.g + \",\" + this.b + \",\" + this.a + \")\";\n  }\n\n  setR(r) {\n    this.r = r;\n  }\n  setG(g) {\n    this.g = g;\n  }\n  setB(b) {\n    this.b = b;\n  }\n  setA(a) {\n    this.a = a;\n  }\n}\n\nvar config = {\n  bubbleSize: 3,\n  bubbleSpeed: 0.5,\n  bubbleNumber: 500,\n  bubbleNumber_mobile: 500,\n  strokeDistance: 10,\n  globalSpeed: 0,\n  bubbleColor: \"#08F\",\n  initialBubbleColor: \"#08F\",\n  doConnect: true\n};\n\nclass Bubble {\n  constructor(canvas) {\n    this.canvas = canvas;\n    this.outOfBounds = false;\n\n    this._v = config.bubbleSpeed;\n    this.x = Math.round(Math.random() * this.canvas.width);\n    this.y = Math.round(Math.random() * this.canvas.height);\n    this.vx = Math.random() * this._v - this._v / 2;\n    this.vy = Math.random() * this._v - this._v / 2;\n\n    this.color = Color.fromHex(config.bubbleColor);\n\n    this.alpha = 0;\n\n    this.size = config.bubbleSize;\n  }\n\n  changeColor(matrix) {\n    this.color = {\n      r: Math.minmax(0, 200, this.color.r + 5 * matrix.r),\n      g: Math.minmax(0, 200, this.color.g + 5 * matrix.g),\n      b: Math.minmax(0, 200, this.color.b + 5 * matrix.b)\n    };\n  }\n\n  move() {\n    this.alpha = Math.min(1, this.alpha + 0.01);\n    this.x += this.vx * (1 + config.globalSpeed);\n    this.y += this.vy * (1 + config.globalSpeed);\n\n    if (\n      this.x < -100 ||\n      this.x > this.canvas.width + 100 ||\n      this.y < -100 ||\n      this.y > this.canvas.height + 100\n    ) {\n      this.outOfBounds = true;\n    }\n  }\n\n  draw(ctx) {\n    try {\n      this.move();\n      ctx.beginPath();\n      ctx.globalCompositeOperation = \"screen\";\n      let colors = [this.color.r, this.color.g, this.color.b, this.alpha];\n      ctx.fillStyle = \"rgba(\" + colors.join(\",\") + \")\";\n      ctx.arc(this.x, this.y, this.size, 0, Math.PI * 2);\n      ctx.fill();\n      ctx.closePath();\n    } catch (err) {\n      console.log(err);\n    }\n  }\n}\n\nclass Fun {\n  constructor() {\n    if (document.querySelectorAll(\"#cels\")[0]) {\n      this.canvas = document.querySelectorAll(\"#cels\")[0];\n      this.ctx = this.canvas.getContext(\"2d\");\n\n      this.height = this.canvas.offsetHeight;\n      this.width = this.canvas.offsetWidth;\n\n      this.canvas.width = this.width;\n      this.canvas.height = this.height;\n\n      this.colorMatrix = { r: -1, g: 1, b: -1 };\n\n      this.bubbles = [];\n      this.nbBubbles =\n        this.width > 500 ? config.bubbleNumber : config.bubbleNumber_mobile;\n\n      requestAnimationFrame(() => this.main());\n    }\n\n    return this;\n  }\n\n  disableAnimation() {\n    cancelAnimationFrame(this._animationFrame);\n  }\n\n  handleResize(e) {\n    if (this.canvas) {\n      this.height = this.canvas.offsetHeight;\n      this.width = this.canvas.offsetWidth;\n\n      this.canvas.width = this.width;\n      this.canvas.height = this.height;\n\n      this.strokeDistance = Math.min(this.width, this.height) / 10;\n    }\n  }\n\n  handleTouchMove(e) {\n    e.preventDefault();\n\n    if (!this.previousTouch) {\n      this.previousTouch = e.touches[0];\n      return;\n    }\n\n    var event = {\n      x: e.touches[0].clientX,\n      y: e.touches[0].clientY,\n      move_x: this.previousTouch.clientX > e.touches[0].clientX ? -2 : 2,\n      move_y: this.previousTouch.clientY > e.touches[0].clientY ? -2 : 2\n    };\n\n    this.replaceBubbles(event);\n\n    this.previousTouch = e.touches[0];\n  }\n\n  handleMouseMove(e) {\n    var event = {\n      x: e.x,\n      y: e.y,\n      move_x: e.movementX,\n      move_y: e.movementY\n    };\n\n    this.replaceBubbles(event);\n  }\n\n  replaceBubbles(e) {\n    for (var bubble of this.bubbles) {\n      if (\n        Math.sqrt(\n          Math.pow(Math.abs(bubble.x - e.x), 2) +\n            Math.pow(Math.abs(bubble.y - e.y), 2)\n        ) < 100\n      ) {\n        bubble.changeColor(this.colorMatrix);\n\n        bubble.size += 0.2;\n\n        bubble.vx += e.move_x / 100;\n        bubble.vy += e.move_y / 100;\n      }\n    }\n  }\n\n  connect(b1, b2) {\n    if (!config.doConnect) {\n      return;\n    }\n\n    var ctx = this.ctx;\n    var d = Math.round(\n      Math.sqrt(Math.pow(b1.x - b2.x, 2) + Math.pow(b1.y - b2.y, 2))\n    );\n    var alpha =\n      ((this.strokeDistance - d) / this.strokeDistance) * b1.alpha * b2.alpha;\n    ctx.beginPath();\n    //ctx.globalCompositeOperation = 'screen';\n    let colors = [b1.color.r, b1.color.g, b1.color.b, alpha];\n    ctx.strokeStyle = \"rgba(\" + colors.join(\",\") + \")\";\n    ctx.moveTo(b1.x, b1.y);\n    ctx.lineTo(b2.x, b2.y);\n    ctx.stroke();\n    ctx.closePath();\n  }\n\n  main() {\n    try {\n      var bubble;\n      this.clear();\n\n      this.bubbles = this.bubbles.filter((x) => x.outOfBounds === false);\n\n      while (this.bubbles.length < this.nbBubbles) {\n        this.bubbles.push(new Bubble(this.canvas));\n      }\n\n      var testConnexion = [];\n      for (bubble of this.bubbles) {\n        bubble.draw(this.ctx);\n        testConnexion.push(bubble);\n      }\n\n      var connexions = [];\n      var connected = [];\n      while (testConnexion.length > 0) {\n        bubble = testConnexion.pop();\n        connected = testConnexion.filter(\n          (b) =>\n            Math.sqrt(\n              Math.pow(b.x - bubble.x, 2) + Math.pow(b.y - bubble.y, 2)\n            ) < this.strokeDistance\n        );\n        for (var conn of connected) {\n          connexions.push([bubble, conn]);\n        }\n      }\n\n      for (var connexion of connexions) {\n        this.connect(connexion[0], connexion[1]);\n      }\n\n      config.globalSpeed = Math.max(\n        config.bubbleSpeed,\n        config.globalSpeed * 0.99\n      );\n\n      this._animationFrame = requestAnimationFrame(() => this.main());\n    } catch (Err) {\n      cancelAnimationFrame(this._animationFrame);\n      console.log(Err);\n    }\n  }\n\n  clear() {\n    this.ctx.clearRect(0, 0, this.width, this.height);\n  }\n\n  init() {\n    if (this.canvas) {\n      this.canvas.addEventListener(\n        \"mousemove\",\n        this.handleMouseMove.bind(this)\n      );\n      this.canvas.addEventListener(\n        \"touchmove\",\n        this.handleTouchMove.bind(this)\n      );\n    }\n\n    this.handleResize();\n    window.addEventListener(\"resize\", this.handleResize);\n\n    this.calculateHeight();\n    window.addEventListener(\"resize\", this.calculateHeight);\n\n    setInterval(() => {\n      this.colorMatrix = {\n        r: Math.random() * 2 > 1 ? 0 : 1,\n        g: Math.random() * 2 > 1 ? -1 : 1,\n        b: Math.random() * 2 > 1 ? 0 : 1\n      };\n    }, 5000);\n  }\n\n  calculateHeight() {\n    let vh = window.innerHeight * 0.01;\n    document.documentElement.style.setProperty(\"--vh\", vh + \"px\");\n  }\n}\n\nnew Fun().init();\n"]}